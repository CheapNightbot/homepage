---
const {} = Astro.props;
---

<button
  id="main-hamburger"
  class="sm:hidden relative cursor-pointer px-0 py-6"
  aria-label="Open navigation menu"
  tabindex="0"
  aria-expanded="false"
>
  <div class="relative block w-7 h-4 group">
    <div id="hamburger-bars">
      <div
        class="absolute left-0 w-full h-[3px] bg-indigo-500 transition-transform duration-200 ease-out top-0"
        id="bar1"
      >
      </div>
      <div
        class="absolute left-0 w-full h-[3px] bg-indigo-500 transition-transform duration-200 ease-out bottom-0"
        id="bar2"
      >
      </div>
    </div>
    <svg
      id="close-icon"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="w-7 h-7 text-indigo-500 absolute inset-0 m-auto transition-opacity duration-200 opacity-0 pointer-events-none"
    >
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  </div>
  <script type="module" is:inline>
    const hamburger = document.getElementById("main-hamburger");
    const mobileMenu = document.getElementById("mobile-menu");
    const mobileBackdrop = document.getElementById("mobile-backdrop");
    const closeIcon = document.getElementById("close-icon");
    const bars = document.getElementById("hamburger-bars");
    let isOpen = false;
    function toggleMenu() {
      isOpen = !isOpen;
      hamburger.setAttribute("aria-expanded", isOpen);
      hamburger.setAttribute("data-open", isOpen);
      if (isOpen) {
        mobileMenu.classList.add("translate-x-0");
        mobileMenu.classList.remove("translate-x-full");
        mobileBackdrop.classList.add("opacity-100", "pointer-events-auto");
        mobileBackdrop.classList.remove("opacity-0", "pointer-events-none");
        document.getElementById("bar1").classList.add("rotate-45", "top-1/2");
        document.getElementById("bar1").classList.remove("top-0");
        document
          .getElementById("bar2")
          .classList.add("-rotate-45", "bottom-1/2", "top-2");
        document.getElementById("bar2").classList.remove("bottom-0");
        closeIcon.classList.remove("opacity-0", "pointer-events-none");
        closeIcon.classList.add("opacity-100");
        bars.classList.add("opacity-0");
        bars.classList.remove("opacity-100");
        document.body.classList.add("overflow-hidden");
      } else {
        mobileMenu.classList.remove("translate-x-0");
        mobileMenu.classList.add("translate-x-full");
        mobileBackdrop.classList.remove("opacity-100", "pointer-events-auto");
        mobileBackdrop.classList.add("opacity-0", "pointer-events-none");
        document
          .getElementById("bar1")
          .classList.remove("rotate-45", "top-1/2");
        document.getElementById("bar1").classList.add("top-0");
        document
          .getElementById("bar2")
          .classList.remove("-rotate-45", "bottom-1/2", "top-2");
        document.getElementById("bar2").classList.add("bottom-0");
        closeIcon.classList.add("opacity-0", "pointer-events-none");
        closeIcon.classList.remove("opacity-100");
        bars.classList.remove("opacity-0");
        bars.classList.add("opacity-100");
        document.body.classList.remove("overflow-hidden");
      }
    }
    hamburger.addEventListener("click", toggleMenu);
    hamburger.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") toggleMenu();
    });
    mobileBackdrop.addEventListener("click", toggleMenu);
  </script>
</button>
